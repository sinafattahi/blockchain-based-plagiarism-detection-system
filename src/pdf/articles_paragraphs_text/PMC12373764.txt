LoRaWAN, as a leading technology of LPWAN, has become a crucial driver of smart cities. Meanwhile, drones have become a key tool for enhancing LoRaWAN network performance. In this study, a comprehensive measurement of a large-scale LoRaWAN network in an urban environment was conducted. Specifically, 28 LoRaWAN end-devices have been deployed in various locations, covering outdoor, indoor, and multiple floors of buildings. Moreover, an aerial gateway mounted on the DJI Mavic 3, along with three ground gateways, has been deployed for data collection. The performance of aerial gateway at altitudes of 50 m, 100 m, and 150 m was also tested. Finally, a total of 28,576 raw data entries were obtained, including valuable information like RSSI, SNR, and timestamps. A preliminary evaluation of the LoRaWAN network was conducted to validate the dataset. To the best of our knowledge, this dataset is the first publicly available UAV-assisted LoRaWAN network measurement data in an urban environment. We believe that our dataset can be utilized in various research areas, including channel modeling, localization, and deep learning.

With the rapid development of the Internet of Things, the concept of smart cities is profoundly changing our lives. In this process, low power wide area network (LPWAN) technology plays a crucial role due to its low power, long distance and low cost1. As one of the key technologies of LPWAN, LoRa, with its robust ecosystem and open standards, has been widely applied in various urban IoT scenarios such as intelligent street lighting2, smart parking3,4, bus monitoring5,6and waste management7,8. Through the LoRaWAN protocol, users can quickly establish private LoRa networks without relying on public infrastructure, while supporting various applications such as wide-area data collection and positioning in GPS-denied environments9–11. However, due to numerous obstacles in the urban environment, signal propagation experiences considerable delays, attenuation, and multipath effects. Non-line-of-sight (NLOS) propagation conditions in urban areas present significant challenges for LoRaWAN network applications, including positioning based on TDOA and RSSI, network planning, and energy consumption optimization12–15. On the other hand, considering the height advantages, mobility, and on-demand deployment of Unmanned Aerial Vehicles (UAVs), more and more studies have integrated LoRaWAN devices on UAVs to improve the performance of LoRa networks. UAVs can effectively mitigate NLOS propagation factors, playing a vital role in enhancing network coverage16,17, improving positioning accuracy18, and reducing energy consumption19. Therefore, studying the ground-to-ground and air-to-ground propagation of LoRa signals in urban environments is crucial for the application of LoRaWAN networks.

This paper summarizes recent experiments on LoRaWAN networks in urban environments and provides a comprehensive comparison with our study, focusing on three aspects: network scale, scenario complexity, and information richness, as shown in Table1.

Experiments on LoRaWAN networks in urban environments.

Some studies have adopted a point-to-point network architecture, which uses only few transmitters and receivers to simplify experimental design, resulting in an overly simplistic network setup. Additionally, although some studies have deployed LoRaWAN networks with a star topology, the limited number of end-devices and gateways makes it difficult to fully capture the characteristic of LoRaWAN networks in complex urban environments.

Most studies focus on measuring ground LoRaWAN networks in urban environments, with limited attention given to UAV-assisted LoRaWAN networks. In addition, in typical LoRaWAN application scenarios such as smart metering and hotel space management, LoRa end-devices often need to be distributed on different floors of the building. However, few studies have considered this in the design of their experiments.

Most studies present the interested data in figures or tables without providing the raw data, making it difficult to analyze detailed information such as multipath effects, timestamp fluctuations, and RSSI variations. Furthermore, most LoRaWAN gateways used in experiments are unable to provide nanosecond-level timestamps, making the data unsuitable for high-precision LoRaWAN positioning based on Time Difference of Arrival (TDOA).

To address the shortcomings of existing research, we have established a large-scale urban LoRaWAN network at Northwestern Polytechnical University. In this network, 28 LoRaWAN end-devices have been deployed in various locations, covering outdoor, indoor, and multiple floors of buildings. An aerial gateway mounted on the DJI Mavic 3, along with three ground gateways, has been deployed for data collection. The aerial gateway collects data at heights of 50 m, 100 m, and 150 m, while the ground gateways are fixed within different buildings. Through real-world experiments, a total of 28,576 raw data entries have been obtained, including information such as RSSI, SNR, and high-precision timestamps. Finally, to validate the dataset, a preliminary evaluation of the LoRaWAN network was conducted using the indicators of Packet Delivery Ratio (PDR), Received Signal Strength Indicator (RSSI) and Signal-to-Noise Ratio (SNR).

Performance evaluation and prediction of LoRaWAN network in urban environments.

Deep learning-based LoRaWAN positioning optimization and SNR prediction.

In this section, the complete process of data generation will be described in detail, including the measurement system, experimental setup, and data collection.

The measurement system adopts the standard LoRaWAN star network topology, which mainly consists of three parts: LoRaWAN end-devices, LoRaWAN gateways, and LoRaWAN servers, as shown in Fig.1.

LoRaWAN end-devices typically consist of a Microcontroller Unit (MCU), sensors, a power module, and a LoRa RF module. These components work together to collect data and wirelessly transmit it to LoRaWAN gateways. According to the LoRaWAN protocol, each end-device has a unique EUI address to distinguish the different devices.

In this experiment, each LoRaWAN end-device consists of an STM8L151 MCU, an SX1278 LoRa module, an STH10 temperature and humidity sensor, a 2 dBi gain spring antenna, and is powered by two 1.2 V, 1000 mAh batteries. Detailly, the STH10 uses IIC to communicate with the MCU, while the SX1278 LoRa module uses UART. Moreover, the device transmits with a power of 17 dBm and utilizes a LoRa spreading factor of 12, uploading sensor data periodically every 10 seconds. The experimental results show that the device can operate continuously for approximately 36–48 hours. The detailed configuration of LoRaWAN end-devices is provided in Table2.

The LoRaWAN gateway is responsible for decoding LoRa packets and recording parameters such as signal strength (RSSI), signal-to-noise ratio (SNR), and timestamps. This information is then transmitted to the LoRaWAN server via Wi-Fi, Ethernet, or cellular networks. Similar to the LoRaWAN end-device, each LoRaWAN gateway has a unique EUI address.

In this experiment, the LoRaWAN gateway consists of a Raspberry Pi 4B, an SX1303 or SX1302 based LoRa module, a 2 dBi gain rubber rod antenna, and a u-blox 7 GPS module. The SX1302 gateway module is widely used in existing research, while the SX1303 provides higher precision timestamps, making it better for high-precision positioning based on TDOA. The LoRa module communicates with the Raspberry Pi through SPI, while the Raspberry Pi’s Wi-Fi module is used for internet connectivity. Besides, the classic open-source gateway project, LoRa packet forwarder, runs on the Raspberry Pi to implement the core gateway functionality. Apart from the aforementioned ground gateways, a DJI Mavic 3 drone with a LoRaWAN gateway onboard was employed to establish an aerial gateway.

LoRaWAN server is responsible for managing all the devices in the network, covering functions such as authentication, traffic monitoring, and data storage.

The standard LoRaWAN star network topology. The end-devices on the left side of the figure connect to the LoRaWAN server through an aerial gateway, while the end-devices on the right connect through a ground gateway. According to the LoRaWAN protocol, an end-device can also connect with multiple gateways simultaneously.

In this experiment, the open-source LoRaWAN network server, ChirpStack, was deployed on the Huawei Cloud server. The web platform of ChirpStack provides a data download service, allowing users to retrieve all LoRa packets received by a specific gateway in JSON format. The dataset provided in this article is sourced from this service.

The experiment established a data collection scenario on the campus of Northwestern Polytechnical University, utilizing 28 LoRaWAN end-devices, 3 ground LoRaWAN gateways, an aerial gateway, and a LoRaWAN server deployed on a cloud server. The detailed layout of the LoRaWAN end-devices and gateways is shown in Fig.2.

The layout of the LoRaWAN end-devices and gateways. The map indicates the locations of the outdoor end-devices, aerial gateway, and buildings A, B, and C. It also shows the floors and locations of the indoor gateways and end-devices within each building.

A total of 28 LoRaWAN end-devices were used in this experiment, covering an area of approximately 2.6 km2. Among them, 5 end-devices were deployed outdoors, evenly distributed along the campus boundary, while the remaining end-devices were placed indoors. Specifically, a total of 5, 13, and 5 LoRaWAN end-devices were deployed in Buildings A, B, and C, respectively. In building A, end-devices were deployed at the east-facing windows on floors 1 to 5; In building C, end-devices were deployed at the west-facing windows on floors 2 to 6; In building B, 5 end-devices were deployed at the west-facing windows, 4 inside the building, and 4 at the east-facing windows. The photographs of the deployed LoRaWAN end-devices are shown in Fig.3.

A total of three Ground LoRaWAN gateways were deployed in this experiment, which were deployed on the fourth floor of buildings A, B, and C, as shown in Fig.4. The gateways in Buildings A and C use the SX1302 LoRa module, while the gateway in Building B uses the SX1303 LoRa module, which provides high-precision timestamps at the nanosecond level.

Additionally, a LoRaWAN gateway is integrated with the DJI Mavic 3 drone to form an aerial gateway, which is deployed at the center of the test field, as shown in Fig.5.

Due to the short transmission period of the end-devices, multiple LoRaWAN end-devices are likely to transmit data simultaneously, which can result in collisions. Especially for aerial gateways with a wide coverage, the probability of collisions increases significantly. Therefore, the data collection experiment is conducted in two groups. The first group deploys 13 LoRaWAN end-devices in Building B for measurement, while the second group measures the remaining 15 LoRaWAN end-devices. During the measurement process, the same testing procedure is applied to each group. First, configure the authentication and network parameters for the end-devices and gateways on the LoRaWAN server, ensuring that the server accurately records the data received by each gateway. Subsequently, deploy the end-devices and ground gateway according to the aforementioned network topology. Meanwhile, the aerial gateway will hover at altitudes of 50 m, 100 m, and 150 m respectively to collect data, with each session lasting approximately 25 minutes. After each data collection experiment, the data from different gateways will be downloaded in JSON format from the server. Finally, the data is categorized and archived according to the groups and gateways, forming the dataset.

It is worth noting that during the measurement of the second group, the battery power of the end-devices in building A notably dropped due to prolonged placement. The insufficient transmission power has caused a significant reduction in the longest propagation distance of LoRa signals, resulting in a low packet delivery rate for both ground gateway and aerial gateway. Therefore, a supplementary experiment was conducted with end-devices in Building A redeployed, which was also included in the final dataset. In addition, when the aerial gateway collects data in the air, wobbles20,21or 3-D rotation22of the drone may cause changes in the drone’s orientation and antenna direction, potentially affecting signal propagation. In this experiment, the LoRaWAN gateway was mounted above the drone to form the aerial gateway. However, if other researchers choose a different mounting method, the results of the experiment may vary.

The dataset is available on figshare23[10.6084/m9.figshare.28681874] and is distributed under the CC BY 4.0 license, permitting reuse without restriction.

According to the process described in the Method section, the data was organized according to different experiments and placed in the “Experiment” folder, as shown in Fig.6. In each subfolder, there is a “Data” folder and a PNG image. The “Data” folder contains the raw JSON data downloaded from the ChirpStack LoRaWAN server, and the JSON data format is shown in Table3. The JSON files are named using the following format: E_N_A, where E represents the gateway EUI, N indicates the number of data entries, and A (optional) represents the flight altitude of UAV. On the other hand, the experimental topology is shown in “Topology.png”, with the EUI numbers of the end-devices and gateways marked.

The distances between end-devices and gateways are also provided in the “Distance” folder in the form of PNG images. The EUI of the outdoor end-device is used for file naming, making it easier for users to quickly locate the files. In addition, a simple Python script example for handling JSON files is located in the ‘Example code’ folder and will be used in the next section.

To validate the dataset, the Packet Delivery Ratio (PDR) of 28 LoRaWAN end-devices across different gateways was calculated, providing a preliminary evaluation of the LoRaWAN network in urban environments. Besides, the SNR and RSSI of two typical LoRaWAN end-device was also analyzed to show the different between indoor end-devices and outdoor end-devices. The results offer valuable insights for determining the optimal number and locations of LoRaWAN devices when deploying a ground or UAV-assisted LoRaWAN network in urban environments.

According to the LoRaWAN protocol, each LoRa packet sent by the end-device must include an incrementing FCnt field, which increases with every new packet. Since the end-device transmits data continuously, the FCnt values change continuously as well. The total number of packets sent during the experiment can be determined by calculating the difference between the FCnt values of the first and last received packets. On the other hand, the number of packets received by the gateway can be directly obtained from the raw JSON data, and the PDR can be calculated by dividing this value by the total number of packets sent. A simple Python script is used to calculate the PDR based on the aforementioned logic. In rare cases, the gateway may receive two packets with the same FCnt due to factors such as multipath, but this scenario has been ignored in the current calculation. If the PDR exceeds 100%, it will be counted as 100%.

The PDR of end-devices for ground LoRaWAN gateways A, B, and C is illustrated in Fig.7.

The ground LoRaWAN gateway A can cover 18 LoRaWAN end-devices, with 11 of them having a PDR exceeding 60%. The coverage area primarily includes Building A and the west side of Building B, while end-devices in Building C are out of range.

Benefiting from its advantageous location, the ground LoRaWAN gateway B can communicate with 25 LoRaWAN end-devices. However, only 9 end-devices have a PDR exceeding 60%, and the PDR of all outdoor end-devices is below 60%. In addition, even within the same building, the PDR of end-devices in the western part of Building B remains below 60%, indicating that a single ground gateway cannot provide sufficient coverage for the entire building.

Due to the dense buildings around the ground LoRaWAN gateway C, only 7 LoRaWAN end-devices are able to communicate with it. Among them, 5 end-devices have a PDR exceeding 60%, all of which are located within Building C. From the map, it can be observed that the distances from Gateway A and Gateway C to the end-devices in Building B are similar. However, Gateway A can cover 9 end-devices, while Gateway C can only cover 2. It demonstrates that in dense building environments, the coverage range of ground gateways is significantly reduced.

PDR of ground LoRaWAN gateway. The thickness of the blue line in the image represents the size of PDR, with thicker lines indicating a larger PDR. The specific PDR values are labeled next to the end-devices, with values above 60% marked in blue and those below 60% marked in red.

The PDR of end-devices for aerial LoRaWAN gateway at different height is illustrated in Fig.8.

When the aerial gateway is deployed at a height of 50 m, it can communicate with 26 LoRaWAN end-devices, providing almost full coverage of the experimental area. The number of end-devices with a PDR exceeding 60% reached 20, showing a significant improvement compared to the ground LoRaWAN gateway.

When the aerial gateway is deployed at a height of 100 m, it can communicate with 27 LoRaWAN end-devices.

Compared to the scenario with the aerial gateway at a height of 50 m, the PDR of most LoRaWAN end-devices has increased. In particular, the PDR of end-devices on the 2nd to 5th floors of Building A all exceeds 95%. However, due to factors like NLOS propagation, the PDR of end-devices on the first floor of Building B and some outdoor end-devices has slightly decreased.

When the aerial gateway is deployed at a height of 150 m, all the LoRaWAN end-devices have been covered. The PDR of LoRaWAN end-devices on higher floors continues to show an upward trend, while that on lower floors exhibits some instability. For example, as the drone’s altitude increased, the end-devices on the 2nd floor of Building C achieved communication for the first time, while the PDR of end-devices on the lower floors of Buildings A and B decreased.

PDR of aerial LoRaWAN gateway. The thickness of the blue line in the image represents the size of PDR, with thicker lines indicating a larger PDR. The specific PDR values are labeled next to the end-devices, with values above 60% marked in blue and those below 60% marked in red.

The variations, averages, and standard deviations of the SNR and RSSI data obtained from different gateways have been compared and analyzed through the Python script. The end-device on the first floor in the west of Building B and the end-device at the northeast corner of the experimental site were chosen as representatives of indoor and outdoor end-devices, respectively. A comparison was conducted between the data collection results from ground gateway B and aerial gateway deployed at different heights.

For outdoor end-devices, the height advantage of the UAV can significantly improve the RSSI and SNR of the devices, as shown in Fig.9. As the height of UAV increases, the average SNR of outdoor end-device also rises accordingly. When the UAV is deployed at the height of 150 m, the improvement compared to the ground gateway B can reach up to 13 dB. However, the fluctuation of the SNR also increases with the altitude of the UAV. On the other hand, the improvement in RSSI can reach up to 13 dBm, while the averages and standard deviations are less affected by the UAV’s altitude.

Outdoor end-device SNR and RSSI variations, averages, and standard deviations across different gateways. The solid line indicates the value variations, the dashed line represents the averages, and the shaded area indicates the standard deviations.

For indoor end-devices, the performance of the aerial gateway is still better than that of the ground gateway. However, due to the impact of NLOS factors, the RSSI and SNR do not increase with the altitude of the UAV, as shown in Fig.10. In fact, the best performance is achieved when the UAV is at an altitude of 50 meters, rather than 150 meters, which differs from the outdoor end-device. The impact of NLOS is also reflected in the fluctuations of RSSI and SNR. When the same gateway and scene configuration was utilized for data collection, the RSSI and SNR fluctuations of indoor end-device is considerably higher than those of outdoor end-device.

Indoor end-device SNR and RSSI variations, averages, and standard deviations across different gateways. The solid line indicates the value variations, the dashed line represents the averages, and the shaded area indicates the standard deviations.

In summary, our dataset can be used for a comprehensive and realistic evaluation of LoRaWAN networks in urban environments. The evaluation results show that drones can significantly enhance the performance of LoRaWAN networks in urban areas, particularly for end-devices on higher floors. A single aerial LoRaWAN gateway (located at an altitude of 150 m) can connect with LoRaWAN end-devices within a 2.6 km² area in a complex urban environment, providing coverage roughly equivalent to that of at least three ground LoRaWAN gateways. In addition, when using aerial gateways for data collection, the optimal deployment height of the gateway varies for indoor and outdoor end-devices. The analysis results indicate that the dataset contains various of valuable data, including RSSI, SNR, and timestamps, which can be widely applied in research areas such as channel modeling, LoRaWAN localization, and deep learning.

To access the data of specific end-devices, users can refer to the ‘Topology.png’ file, which highlights the EUI addresses of the deployed LoRaWAN devices. The EUI of gateways and end-devices corresponds to the “gatewayId” and “devaddr” fields in the JSON file, respectively. For detailed information on the JSON data format, please refer to the documentation on the ChirpStack website (https://github.com/chirpstack/chirpstack/blob/master/api/proto/gw/gw.proto, accessed July 2025). Before analyzing the timestamp data, ensure that GPS has been enabled correctly. An effective method is to compare the times in the “gwTime” and “nsTime” fields in the JSON file. If the difference between them is around 1 second, it indicates that the GPS is functioning correctly. Otherwise, the gateway’s timestamp and GPS coordinates are unreliable, but other information such as SNR and RSSI remains valid. For distance-related applications, users can refer to the images in the Distance folder, which show the distance between the LoRaWAN end-device and the ground gateway. Since the locations of Ground Gateway B and the Aerial Gateway are close to each other, the distance of Ground Gateway B can be used as an approximation for the Aerial Gateway.

This work is supported by the Fundamental Research Funds for the Central Universities (No. D5000230154) and the Key Research and Development Program of Shaanxi under Grant 2024GX-YBXM-022.